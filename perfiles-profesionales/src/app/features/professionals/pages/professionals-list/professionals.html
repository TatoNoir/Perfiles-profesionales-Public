<ion-content [fullscreen]="true" (ionScroll)="onScroll($event)">
  <!-- Header -->
  <ion-header [translucent]="true">
    <ion-toolbar>
      <ion-title>
        <a routerLink="/" class="home-link">Portal de profesionales</a>
      </ion-title>
      <ion-buttons slot="end">
        <ion-button routerLink="/login" color="primary" fill="solid">
          Ingresar al panel
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <div class="professionals-page">
    <!-- Header Section -->
    <header class="page-header">
      <div class="header-content">
        <h1 class="page-title">Encuentra tu Profesional</h1>
        <p class="page-subtitle">
          Conecta con expertos verificados en desarrollo, diseño, marketing y más
        </p>

        <!-- Search Bar -->
        <div class="search-container">
          <div class="search-wrapper">
            <ion-searchbar
              class="search-input"
              placeholder="Buscar..."
              [value]="searchQuery"
              (ionInput)="onSearchInputEvent($event)"
              (keyup.enter)="onSearch()"
              show-clear-button="focus"
              animated="false"
              [disabled]="isSearching">
            </ion-searchbar>

            <!-- Filtros de Ubicación dentro del input -->
            <div class="location-filters-inline">
              <ion-item class="filter-item-inline">
                <ion-select
                  [(ngModel)]="selectedProvince"
                  (ionChange)="onProvinceChange($event)"
                  placeholder="Provincia"
                  interface="popover"
                  class="filter-select">
                  <ion-select-option value="all">Todas</ion-select-option>
                  <ion-select-option *ngFor="let province of provinces" [value]="province.id.toString()">
                    {{ province.name }}
                  </ion-select-option>
                </ion-select>
              </ion-item>

              <ion-item class="filter-item-inline">
                <ion-select
                  [(ngModel)]="selectedCity"
                  (ionChange)="onCityChange($event)"
                  placeholder="Localidad"
                  interface="popover"
                  [disabled]="!selectedProvince"
                  class="filter-select">
                  <ion-select-option value="all">Todas</ion-select-option>
                  <ion-select-option *ngFor="let city of cities" [value]="city.id.toString()">
                    {{ city.name }}
                  </ion-select-option>
                </ion-select>
              </ion-item>
            </div>
          </div>

          <ion-button
            class="search-button"
            (click)="onSearch()"
            fill="solid"
            color="primary"
            [disabled]="isSearching || !canSearch">
            <ion-icon name="search" slot="start"></ion-icon>
            {{ isSearching ? 'Buscando...' : 'Buscar' }}
          </ion-button>
            <ion-button
              *ngIf="hasActiveSearch"
              class="clear-button"
              (click)="onShowAll()"
              fill="solid"
              color="light">
            <ion-icon name="refresh" slot="start"></ion-icon>
            Mostrar todos
          </ion-button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Sidebar with Filters -->
      <app-filters-sidebar
        (activitySelected)="onActivitySelected($event)"
        (provinceSelected)="onProvinceSelected($event)"
        (citySelected)="onCitySelected($event)">
      </app-filters-sidebar>

      <!-- Professionals List -->
      <app-professionals-list
        [professionals]="professionals"
        [displayedProfessionals]="displayedProfessionals"
        [isLoading]="isLoading"
        [hasMoreData]="hasMoreData"
        (loadMore)="onLoadMore()"
        (viewProfile)="onViewProfile($event)">
      </app-professionals-list>
    </main>
  </div>
</ion-content>
