<ion-content [fullscreen]="true">
  <!-- Header -->
  <ion-header [translucent]="true" *ngIf="professional">
    <ion-toolbar>
      <ion-button fill="clear" slot="start" (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
      <ion-title>{{ professional.name }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="professional-detail-page" *ngIf="professional">
    <!-- Main Content -->
    <div class="main-content">
    <!-- Left Column -->
    <div class="left-column">
      <!-- Profile Card -->
      <ion-card class="profile-card">
        <ion-card-content class="profile-content">
          <div class="profile-header">
            <div class="avatar-container">
              <div class="avatar">
                {{ professional.name.charAt(0) }}{{ professional.name.split(' ')[1]?.charAt(0) || '' }}
              </div>
            </div>
            <div class="profile-info">
              <div class="name-container">
                <h1 class="professional-name">{{ professional.name }}</h1>
                <ion-icon
                  *ngIf="professional.isVerified"
                  name="checkmark-circle"
                  class="verified-icon">
                </ion-icon>
              </div>
              <p class="profession">{{ professional.profession }}</p>
              <div class="rating-location">
                <div class="rating">
                  <ion-icon name="star" class="star-icon"></ion-icon>
                  <span class="rating-text">{{ professional.rating }} ({{ professional.reviews }} reseñas)</span>
                </div>
                <div class="location">
                  <ion-icon name="location" class="location-icon"></ion-icon>
                  <span class="location-text">{{ professional.location }}</span>
                </div>
              </div>
              <div class="status-tag" [style.background-color]="getStatusColor(professional.status)">
                {{ getStatusText(professional.status) }}
              </div>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- About Me Card -->
      <ion-card class="info-card">
        <ion-card-header>
          <ion-card-title class="card-title">Sobre mí</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p class="about-text">{{ professional.aboutMe }}</p>
        </ion-card-content>
      </ion-card>

      <!-- Skills Card -->
      <ion-card class="info-card">
        <ion-card-header>
          <ion-card-title class="card-title">Habilidades</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="skills-container">
            <ion-chip *ngFor="let skill of professional.skills" class="skill-tag">{{ skill }}</ion-chip>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Work Zone Card -->
      <ion-card class="info-card">
        <ion-card-header>
          <ion-card-title class="card-title">Zona de Trabajo</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p class="work-zone-description">Áreas de cobertura donde este profesional ofrece sus servicios:</p>
          <div class="work-zones-container">
            <ion-chip *ngFor="let zone of professional.workZones" class="work-zone-tag">
              <ion-icon name="location" slot="start"></ion-icon>
              {{ zone }}
            </ion-chip>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Right Column -->
    <div class="right-column">
      <!-- Price & Contact Card -->
      <ion-card class="contact-card">
        <ion-card-content class="contact-content">
          <div class="price-section">
            <div class="price-amount">${{ professional.pricePerHour }}</div>
            <div class="price-unit">por hora</div>
          </div>
          <ion-button class="contact-button" (click)="contactProfessional()" fill="solid" color="primary" size="large">
            <ion-icon name="mail" slot="start"></ion-icon>
            Contactar
          </ion-button>
        </ion-card-content>
      </ion-card>

      <!-- Statistics Card -->
      <ion-card class="stats-card">
        <ion-card-header>
          <ion-card-title class="stats-title">Estadísticas</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="stats-list">
            <div class="stat-item">
              <span class="stat-label">Proyectos completados</span>
              <span class="stat-value">{{ professional.completedProjects }}</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Tasa de respuesta</span>
              <span class="stat-value">{{ professional.responseRate }}%</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Tiempo de respuesta</span>
              <span class="stat-value">{{ professional.responseTime }}</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Verified Profile Card -->
      <ion-card class="verified-card">
        <ion-card-content class="verified-content">
          <div class="verified-header">
            <ion-icon name="checkmark-circle" class="verified-icon"></ion-icon>
            <h3 class="verified-title">Perfil Verificado</h3>
          </div>
          <p class="verified-description">
            Este profesional ha completado el proceso de verificación y ha sido validado por nuestro equipo.
          </p>
        </ion-card-content>
      </ion-card>
    </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="!professional">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Cargando perfil...</p>
  </div>
</ion-content>

<!-- Contact Modal -->
<app-contact-modal
  [professional]="professional"
  [isOpen]="isContactModalOpen"
  (closeModal)="onCloseContactModal()">
</app-contact-modal>
