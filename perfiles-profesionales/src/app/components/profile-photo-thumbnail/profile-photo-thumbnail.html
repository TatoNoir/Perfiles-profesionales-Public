<div class="profile-photo-thumbnail" [ngClass]="getSizeClass()">
  <!-- Photo Display -->
  <div class="photo-container">
    <img
      *ngIf="photoUrl"
      [src]="photoUrl"
      [alt]="name + ' - Foto de perfil'"
      class="profile-image"
      (error)="onImageError($event)">

    <div
      *ngIf="!photoUrl"
      class="avatar-fallback">
      {{ getInitials() }}
    </div>

    <!-- Overlay for editing -->
    <div class="photo-overlay" *ngIf="isEditable && showChangeButton">
      <ion-button
        fill="clear"
        size="small"
        class="change-photo-button"
        (click)="triggerFileInput()">
        <ion-icon name="camera" slot="icon-only"></ion-icon>
      </ion-button>

      <ion-button
        *ngIf="photoUrl"
        fill="clear"
        size="small"
        class="remove-photo-button"
        (click)="onRemovePhoto()">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </div>
  </div>

  <!-- Hidden file input -->
  <input
    #fileInput
    type="file"
    accept="image/*"
    class="file-input"
    (change)="onFileSelected($event)"
    style="display: none;">

  <!-- Change photo button (alternative to overlay) -->
  <div class="change-photo-section" *ngIf="isEditable && showChangeButton && !photoUrl">
    <ion-button
      fill="outline"
      size="small"
      class="change-photo-text-button"
      (click)="triggerFileInput()">
      <ion-icon name="camera" slot="start"></ion-icon>
      Cambiar foto
    </ion-button>
  </div>
</div>
