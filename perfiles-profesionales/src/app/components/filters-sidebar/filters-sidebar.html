<aside class="filters-sidebar">
  <div class="filters-content">
    <!-- Filtro de Actividades -->
    <ion-card class="filter-section">
      <ion-card-header>
        <ion-card-title class="filter-title">Actividades</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <!-- Buscador de actividades (Desktop) -->
        <div class="activity-search-container">
          <input
            type="text"
            placeholder="Buscar actividades..."
            [value]="activitySearchTerm"
            (input)="onActivitySearch($event)"
            class="activity-search-input">
        </div>

        <!-- Lista de actividades con scroll (Desktop) -->
        <div class="activities-list-container">
          <div class="activities-list">
            <div
              class="activity-item"
              [class.selected]="selectedActivity === 'all'"
              (click)="onActivityChange('all')">
              <span class="activity-name">Todas las actividades</span>
            </div>
            <div
              *ngFor="let activity of filteredActivities"
              class="activity-item"
              [class.selected]="selectedActivity === activity.name"
              (click)="onActivityChange(activity.name)">
              <span class="activity-name">
                {{ activity.name }}
                <span class="professionals-count" *ngIf="activity.professionals_count !== undefined">({{ activity.professionals_count }})</span>
              </span>
              <span class="activity-description" *ngIf="activity.description">{{ activity.description }}</span>
            </div>
          </div>
        </div>

        <!-- Select móvil (Mobile) -->
        <div class="activity-select-mobile">
          <ion-select
            [value]="selectedActivity"
            (ionChange)="onActivityChange($event.detail.value)"
            placeholder="Seleccionar actividad"
            class="filter-select">
            <ion-select-option value="all">Todas las actividades</ion-select-option>
            <ion-select-option *ngFor="let activity of activities" [value]="activity.name">
              {{ activity.name }}<span *ngIf="activity.professionals_count !== undefined"> ({{ activity.professionals_count }})</span>
            </ion-select-option>
          </ion-select>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Filtro de Provincia -->
    <ion-card class="filter-section">
      <ion-card-header>
        <ion-card-title class="filter-title">Provincia</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <!-- Buscador de provincias (Desktop) -->
        <div class="province-search-container">
          <input
            type="text"
            placeholder="Buscar provincias..."
            [value]="provinceSearchTerm"
            (input)="onProvinceSearch($event)"
            class="province-search-input">
        </div>

        <!-- Lista de provincias con scroll (Desktop) -->
        <div class="provinces-list-container">
          <div class="provinces-list">
            <div
              class="province-item"
              [class.selected]="selectedProvince === 'all'"
              (click)="onProvinceChange('all')">
              <span class="province-name">Todas las provincias</span>
            </div>
            <div
              *ngFor="let province of filteredProvinces"
              class="province-item"
              [class.selected]="selectedProvince === province.id.toString()"
              (click)="onProvinceChange(province.id.toString())">
              <span class="province-name">{{ province.name }}</span>
            </div>
          </div>
        </div>

        <!-- Select móvil (Mobile) -->
        <div class="province-select-mobile">
          <ion-select
            [value]="selectedProvince"
            (ionChange)="onProvinceChange($event.detail.value)"
            placeholder="Seleccionar provincia"
            class="filter-select">
            <ion-select-option value="all">Todas las provincias</ion-select-option>
            <ion-select-option *ngFor="let province of provinces" [value]="province.id.toString()">
              {{ province.name }}
            </ion-select-option>
          </ion-select>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Filtro de Ciudad -->
    <ion-card class="filter-section">
      <ion-card-header>
        <ion-card-title class="filter-title">Ciudad</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <!-- Mensaje cuando no hay provincia seleccionada -->
        <div *ngIf="selectedProvince === 'all'" class="city-message">
          <p class="city-message-text">Seleccione una provincia para cargar las ciudades</p>
        </div>

        <!-- Buscador de ciudades (Desktop) -->
        <div *ngIf="selectedProvince !== 'all'" class="city-search-container">
          <input
            type="text"
            placeholder="Buscar ciudades..."
            [value]="citySearchTerm"
            (input)="onCitySearch($event)"
            class="city-search-input">
        </div>

        <!-- Lista de ciudades con scroll (Desktop) -->
        <div *ngIf="selectedProvince !== 'all'" class="cities-list-container">
          <div class="cities-list">
            <div
              class="city-item"
              [class.selected]="selectedCity === 'all'"
              (click)="onCityChange('all')">
              <span class="city-name">Todas las ciudades</span>
            </div>
            <div
              *ngFor="let city of filteredCities"
              class="city-item"
              [class.selected]="selectedCity === city.id.toString()"
              (click)="onCityChange(city.id.toString())">
              <span class="city-name">{{ city.name }}</span>
            </div>
          </div>
        </div>

        <!-- Select móvil (Mobile) -->
        <div *ngIf="selectedProvince !== 'all'" class="city-select-mobile">
          <ion-select
            [value]="selectedCity"
            (ionChange)="onCityChange($event.detail.value)"
            placeholder="Seleccionar ciudad"
            class="filter-select">
            <ion-select-option value="all">Todas las ciudades</ion-select-option>
            <ion-select-option *ngFor="let city of cities" [value]="city.id.toString()">
              {{ city.name }}
            </ion-select-option>
          </ion-select>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</aside>
